#!/bin/bash

if [ -z "$1" ]; then
	echo "Specify Monitor"
	exit 1
fi

function checkMonitor {
	OUTPUT=$(xrandr | grep $1)

	# EXIT IF MONITOR NOT FOUND
	if [ "$OUTPUT" == "" ]; then
		echo "Monitor $1 not found"
		exit 1
	fi
}

checkMonitor $1

if [ "$1" == "eDP1" ]; then ONBOARD=1; else ONBOARD=0; fi

STATUS=$(xrandr --listmonitors | grep $1)

# DISCONNECTED
if [ "$STATUS" == "" ]; then

	if [ "$2" != "" ]; then
		case "$2" in
			"right") COMMAND="--right-of";;
			"left") COMMAND="--left-of";;
			"above") COMMAND="--above";;
			"below") COMMAND="--below";;
			*)
				echo "Postition invalid"
				exit 1
		esac

		checkMonitor $3

	fi

	xrandr --output $1 --auto $COMMAND $3
# CONNECTED
else
	xrandr --output $1 --off
fi

if [ $ONBOARD -eq 1 ]; then
	toggletouchpad
fi
