#!/bin/bash

TOUCH_ID=$(xinput list | grep TouchPad | cut -d "=" -f 2 | awk '{print $1}')
KEYB_ID=$(xinput list | grep "AT Translated Set 2 keyboard" | cut -d "=" -f 2 | awk '{print $1}')
KEYB_COUNT=$(xinput list | cut -d "=" -f 1 | grep -i keyboard | wc -l)

#TOUCH_ENABLE=$(xinput list-props $TOUCH_ID | awk '/Device Enabled/{print $NF}')
TOUCH_ENABLE="$1"
TOUCH_DEVICE=$(xinput list-props 13 | grep "Device Enabled" | cut -d ":" -f 1 | sed 's/[^0-9]//g');

# Enable
if [ $TOUCH_ENABLE -eq 1 ]; then
	xinput set-prop $TOUCH_ID $TOUCH_DEVICE 1
	xinput enable $KEYB_ID

# Disable
elif [ $TOUCH_ENABLE -eq 0 ]; then
	xinput set-prop $TOUCH_ID $TOUCH_DEVICE 0

	if [ $KEYB_COUNT -gt 3 ]; then
		xinput disable $KEYB_ID
	fi
fi
