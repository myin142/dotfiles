#!/bin/sh

if [ ! -d $1 ]; then
    echo "Input is not a directory"
    exit
fi

if [ ! -d $2 ]; then
    echo "Output is not a directory"
    exit
fi

INPUT="${1:-"."}"
OUTPUT="${2:-"."}"
FILES="$(ls -1 $INPUT)"

for FILE in ${FILES[@]}; do
    FULL_PATH="$INPUT/$FILE"
    if [ -f "$FULL_PATH" ]; then
        if [[ $FILE != *".zip" ]]; then
            FILE_NAME="$(echo $FILE | cut -d \. -f 1)"
            zip -r "$OUTPUT/$FILE_NAME.zip" "$FULL_PATH"
        fi
    fi
done
